(this["webpackJsonpreact-xkcd"]=this["webpackJsonpreact-xkcd"]||[]).push([[0],{23:function(e,t,n){e.exports=n(35)},29:function(e,t,n){},30:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(5),i=n.n(o),c=n(38),l=(n(28),n(29),n(6)),s=n(7),u=n(10),m=n(8),h=n(11),d=n(37),p=n(39),g=n(13),f=n(3);n(30);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(g.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.setState({img:"image",title:"image",alt:"alt",id:"",transcript:"",comics:{}}),this.loadComic(),document.addEventListener("keydown",(function(t){return e.handleKeydown(t)}),!1)}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("keyPress",(function(t){return e.handleKeydown(t)}),!1)}},{key:"componentWillReceiveProps",value:function(e){this.state.id!==Number(e.history.location.pathname.slice(12))&&this.loadComic(Number(e.history.location.pathname.slice(12)))}},{key:"handleKeydown",value:function(e){var t=e.key,n=e.altKey,a=this.state.id;n&&"ArrowLeft"===t||n&&"ArrowRight"===t||("ArrowLeft"===t||"a"===t||"A"===t?this.goToPage(a-1):"ArrowRight"===t||"d"===t||"D"===t?this.goToPage(a+1):"r"!==t&&"R"!==t||this.goToPage(this.randomInt(1,2039)))}},{key:"loadComic",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.location.pathname.slice(12);if(this.state&&this.state.comics[Number(t)]){var n=this.state.comics[Number(t)],a=n.img,r=n.title,o=n.alt,i=n.transcript;this.setState({img:a,title:r,alt:o,id:t,transcript:i})}else fetch("https://xkcd.now.sh/?comic=".concat(t||"latest")).then((function(e){return e.json()})).then((function(t){var n=t.img,a=t.title,r=t.alt,o=t.num,i=t.transcript;e.setState({img:n,title:a,alt:r,id:o,transcript:i,comics:y({},e.state.comics,Object(g.a)({},o,{img:n,title:a,alt:r,transcript:i}))})})).catch((function(n){""!==t&&"/"!==t&&e.loadComic("/")}))}},{key:"goToPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.props.history.push("/react-xkcd/".concat(e))}},{key:"randomInt",value:function(e,t){return Math.floor(Math.random()*t+e)}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"navigation-wrapper"},r.a.createElement(f.b,null,r.a.createElement(f.a,{color:"primary",onClick:function(){return e.goToPage(1)}},"<<"),r.a.createElement(f.a,{color:"primary",onClick:function(){return e.goToPage(e.state.id-1)}},"Prev"),r.a.createElement(f.a,{color:"primary",onClick:function(){return e.goToPage(e.randomInt(1,2039))}},"Random"),r.a.createElement(f.a,{color:"primary",onClick:function(){return e.goToPage(e.state.id+1)}},"Next"),r.a.createElement(f.a,{color:"primary",active:!1,onClick:function(){return e.goToPage()}},">>")));return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,this.state.title),t,r.a.createElement("br",null),r.a.createElement("div",{className:"image-wrapper"},r.a.createElement("img",{className:"comic",src:this.state.img,alt:"Possibly a game, try link to original page"}),r.a.createElement("div",{id:"left-image-overlay"})),r.a.createElement("br",null),r.a.createElement("p",{className:"bodyText"},r.a.createElement("strong",null,"Alt text: "),this.state.alt),this.state.transcript&&r.a.createElement(a.Fragment,null,r.a.createElement(f.a,{color:"primary",id:"toggler",className:"mb-1"},"Transcript"),r.a.createElement(f.e,{toggler:"#toggler"},r.a.createElement(f.c,{className:"bodyText"},r.a.createElement(f.d,null,this.state.transcript)))),t,r.a.createElement("a",{href:"https://www.explainxkcd.com/wiki/index.php/".concat(this.state.id)},"Don't get the joke?"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://xkcd.com/".concat(this.state.id)},"This comic on xkcd"),r.a.createElement("br",null))}}]),t}(a.Component),w=Object(p.a)(b),k=(n(34),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d.a,{path:"/react-xkcd/",component:w}))}}]),t}(a.Component)),E=Object(p.a)(k),O=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function j(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(c.a,null,r.a.createElement(E,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/react-xkcd",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/react-xkcd","/service-worker.js");O?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):j(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):j(e)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.51c88748.chunk.js.map